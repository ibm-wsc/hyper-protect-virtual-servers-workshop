
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../overview/">
      
      
        <link rel="next" href="../grep11-display/">
      
      <link rel="icon" href="../../images/hpvs-logo.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.11">
    
    
      
        <title>How to set up a GREP11 server - Hyper Protect Virtual Servers (HPVS) Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="yellow">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-set-up-a-grep11-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Hyper Protect Virtual Servers (HPVS) Workshop" class="md-header__button md-logo" aria-label="Hyper Protect Virtual Servers (HPVS) Workshop" data-md-component="logo">
      
  <img src="../../images/hpvs-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hyper Protect Virtual Servers (HPVS) Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to set up a GREP11 server
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="yellow"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../assignment/" class="md-tabs__link">
      Lab Assignments
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../overview/" class="md-tabs__link md-tabs__link--active">
        GREP11 Lab
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../prerequisites/" class="md-tabs__link">
        Secure Image Build Lab
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../glossary/" class="md-tabs__link">
      Glossary of terms
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../resources/" class="md-tabs__link">
      Other resources
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../proposechange/" class="md-tabs__link">
      Propose a change
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hyper Protect Virtual Servers (HPVS) Workshop" class="md-nav__button md-logo" aria-label="Hyper Protect Virtual Servers (HPVS) Workshop" data-md-component="logo">
      
  <img src="../../images/hpvs-logo.svg" alt="logo">

    </a>
    Hyper Protect Virtual Servers (HPVS) Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../assignment/" class="md-nav__link">
        Lab Assignments
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          GREP11 Lab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          GREP11 Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Lab overview
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          How to set up a GREP11 server
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        How to set up a GREP11 server
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hyper-protect-virtual-servers-lpar-setup" class="md-nav__link">
    Hyper Protect Virtual Servers LPAR setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note-all-commands-on-this-page-are-for-reference-only-and-not-to-be-entered-by-you-in-the-lab" class="md-nav__link">
    NOTE: All commands on this page are for reference only and not to be entered by you in the lab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-grep11-server-setup" class="md-nav__link">
    Overview of GREP11 server setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-certification-authority-ca-certificate-and-key" class="md-nav__link">
    Create a Certification Authority (CA) certificate and key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-grep11-server-x509-certificate-for-tls-authentication" class="md-nav__link">
    Create a GREP11 server X.509 certificate for TLS authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-x509-certificate-for-your-client-application-for-tls-authentication" class="md-nav__link">
    Create an X.509 certificate for your client application for TLS authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-crypto-domains-on-your-hyper-protect-virtual-servers-lpar" class="md-nav__link">
    List Crypto Domains on your Hyper Protect Virtual Servers LPAR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-yaml-or-json-configuration-files-for-grep11-server" class="md-nav__link">
    Create YAML or JSON configuration files for GREP11 server
  </a>
  
    <nav class="md-nav" aria-label="Create YAML or JSON configuration files for GREP11 server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml-file-for-grep11-server-configuration" class="md-nav__link">
    YAML file for GREP11 server configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-file-for-grep11-server-configuration" class="md-nav__link">
    JSON file for GREP11 server configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-grep11-server" class="md-nav__link">
    Start the GREP11 server
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../grep11-display/" class="md-nav__link">
        Displaying your GREP11 environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run-grep11-samples/" class="md-nav__link">
        Run the GREP11 sample code
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          Run the Lab exercises
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Run the Lab exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exercise-overview/" class="md-nav__link">
        An overview of the Exercises
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab-exercise1/" class="md-nav__link">
        Exercise 1 (List PKCS Mechanisms)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab-exercise2/" class="md-nav__link">
        Exercise 2 (Encryption and Decryption)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab-exercise3/" class="md-nav__link">
        Exercise 3 (Sign and Verify)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lab-exercise4/" class="md-nav__link">
        Exercise 4 (Wrap and Unwrap Key)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Secure Image Build Lab
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Secure Image Build Lab
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prerequisites/" class="md-nav__link">
        Prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/overview/" class="md-nav__link">
        Hyper Protect Virtual Servers (HPVS) Lab Process Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/securebuild-setup/" class="md-nav__link">
        Configuring your Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/create-server/" class="md-nav__link">
        Create your HPVS Secure Build Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/build/" class="md-nav__link">
        Securely Build your Application
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/deploy-app/" class="md-nav__link">
        Deploy your Securely Built Application as a Hyper Protect Virtual Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/bitcoin_wallet/" class="md-nav__link">
        Welcome to the Secure Bitcoin Wallet on IBM LinuxONE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../securebuild-lab/cleanup/" class="md-nav__link">
        Clean up your Environment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        Glossary of terms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../resources/" class="md-nav__link">
        Other resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../proposechange/" class="md-nav__link">
        Propose a change
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hyper-protect-virtual-servers-lpar-setup" class="md-nav__link">
    Hyper Protect Virtual Servers LPAR setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#note-all-commands-on-this-page-are-for-reference-only-and-not-to-be-entered-by-you-in-the-lab" class="md-nav__link">
    NOTE: All commands on this page are for reference only and not to be entered by you in the lab
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview-of-grep11-server-setup" class="md-nav__link">
    Overview of GREP11 server setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-certification-authority-ca-certificate-and-key" class="md-nav__link">
    Create a Certification Authority (CA) certificate and key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-grep11-server-x509-certificate-for-tls-authentication" class="md-nav__link">
    Create a GREP11 server X.509 certificate for TLS authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-an-x509-certificate-for-your-client-application-for-tls-authentication" class="md-nav__link">
    Create an X.509 certificate for your client application for TLS authentication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list-crypto-domains-on-your-hyper-protect-virtual-servers-lpar" class="md-nav__link">
    List Crypto Domains on your Hyper Protect Virtual Servers LPAR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-yaml-or-json-configuration-files-for-grep11-server" class="md-nav__link">
    Create YAML or JSON configuration files for GREP11 server
  </a>
  
    <nav class="md-nav" aria-label="Create YAML or JSON configuration files for GREP11 server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#yaml-file-for-grep11-server-configuration" class="md-nav__link">
    YAML file for GREP11 server configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#json-file-for-grep11-server-configuration" class="md-nav__link">
    JSON file for GREP11 server configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#start-the-grep11-server" class="md-nav__link">
    Start the GREP11 server
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop/edit/master/docs/grep11-lab/grep11-setup.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop/raw/master/docs/grep11-lab/grep11-setup.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  



<h1 id="how-to-set-up-a-grep11-server">How to set up a GREP11 server<a class="headerlink" href="#how-to-set-up-a-grep11-server" title="Permanent link">&para;</a></h1>
<h2 id="hyper-protect-virtual-servers-lpar-setup">Hyper Protect Virtual Servers LPAR setup<a class="headerlink" href="#hyper-protect-virtual-servers-lpar-setup" title="Permanent link">&para;</a></h2>
<h2 id="note-all-commands-on-this-page-are-for-reference-only-and-not-to-be-entered-by-you-in-the-lab">NOTE: All commands on this page are for reference only and not to be entered by you in the lab<a class="headerlink" href="#note-all-commands-on-this-page-are-for-reference-only-and-not-to-be-entered-by-you-in-the-lab" title="Permanent link">&para;</a></h2>
<p>Hyper Protect Virtual Servers runs in an LPAR that is defined in Secure Service Container (SSC) mode. Defining an LPAR is a normal task for an IBM Z or LinuxONE systems administrator, typically performed from the Hardware Management Console (HMC).</p>
<p>The systems administrator must<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> dedicate one or more domains of one or more Crypto Express cards to the Hyper Protect Virtual Servers LPAR in order to use the GREP11 server. These Crypto Express cards must be defined in EP11 mode to your IBM Z or LinuxONE server in order to be used by a GREP11 server. 
These tasks are documented in the Hyper Protect Virtual Servers documentation, or in IBM publications referenced in the Hyper Protect Virtual Servers documentation. </p>
<p>The version of Hyper Protect Virtual Servers that we will be using in this lab is version 1.2.2.1, which was released on November 6, 2020.</p>
<p>A GREP11 server communicates with one and only one Crypto Express domain, and vice versa.  You can run multiple GREP11 servers if you have multiple domains configured to your Hyper Protect Virtual Servers LPAR.</p>
<p>The GREP11 server is stateless, so desired levels of throughput and resilience can be achieved by loading the same master key in one or more domains of one or more Crypto Express 7S cards across one or more CECs across one or more geographies.</p>
<h2 id="overview-of-grep11-server-setup">Overview of GREP11 server setup<a class="headerlink" href="#overview-of-grep11-server-setup" title="Permanent link">&para;</a></h2>
<p>This section provides an overview of what the remaining sections of this page will discuss in detail.</p>
<p>The following steps are required:</p>
<ol>
<li>
<p>Create a Certification Authority (CA) certificate and key</p>
</li>
<li>
<p>Create a GREP11 server X.509 certificate for <a href="https://tools.ietf.org/html/rfc8446" target="_blank">Transport Layer Security (TLS)</a> authentication</p>
</li>
<li>
<p>Create an X.509 certificate for your client application for TLS authentication</p>
</li>
<li>
<p>List Crypto Domains on your Hyper Protect Virtual Servers LPAR</p>
</li>
<li>
<p>Create <a href="https://yaml.org/" target="_blank">YAML</a> and/or <a href="https://www.json.org/" target="_blank">JSON</a> configuration files for GREP11 server initialization</p>
</li>
<li>
<p>Start the GREP11 server</p>
</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>The commands shown on this page are for reference only</strong>- they have already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<h2 id="create-a-certification-authority-ca-certificate-and-key">Create a Certification Authority (CA) certificate and key<a class="headerlink" href="#create-a-certification-authority-ca-certificate-and-key" title="Permanent link">&para;</a></h2>
<p>The <em>openssl</em> utility is used to generate a private key and a certificate that will act as a certification authority (CA). This will be used in later steps to issue certificates for the GREP11 server and for the client application which will connect to the GREP11 server.</p>
<p>Whenever you browse the web to a site with <em>https</em>, the server presents its certificate to your browser. This is known as <em>server-side</em> or <em>one-way</em> TLS authentication.  Most websites do not ask you to present a certificate. The website makes itself available to anybody who browses to it. </p>
<p>With mutual TLS authentication, the client does need to present a certificate.  The server will only establish a session with a client who presents a certificate that is trusted by the server. This prevents our GREP11 server from being used by unauthorized clients.</p>
<p>The following command was used to create the RSA private key which will be used by our soon to be created CA</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>atgz-hpvs-ca.key<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
<p>This created a file named <code>atgz-hpvs-ca.key</code> which is an RSA private key.  </p>
<p>In most cases (and mandatory from PKCS #11 version 2.4 onwards) the RSA private key contains enough information to reconstitute the public key. It is for this reason that the private key is used as input to the following command, which will create a Certification Authority X.509 certificate. X.509 certificates contain information identifying the certificate holder, the attributes of the certificate, including what the certificate can be used for, and, importantly, the public key.  </p>
<p>We used this command to create this certificate.</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-x509<span class="w"> </span>-key<span class="w"> </span>atgz-hpvs-ca.key<span class="w"> </span>-out<span class="w"> </span>atgz-hpvs-ca.pem
</code></pre></div>
<p>The <code>atgz-hpvs-ca.key</code> file was input to this command, and the <code>atgz-hpvs-ca.pem</code> file is the output of this command.  This <code>atgz-hpvs-ca.pem</code> file is our "homegrown" certification authority root certificate.  </p>
<p>I will use the Linux <code>cat</code> command to get a raw listing of the root certificate we just created:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>atgz-hpvs-ca.pem
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code>-----BEGIN CERTIFICATE-----
MIIEMzCCAxugAwIBAgIUallVg6GrWPfoiwwUcCBdB+f7kPQwDQYJKoZIhvcNAQEL
BQAwgagxCzAJBgNVBAYTAlVTMREwDwYDVQQIDAhWaXJnaW5pYTEQMA4GA1UEBwwH
SGVybmRvbjEMMAoGA1UECgwDSUJNMSowKAYDVQQLDCFBZHZhbmNlZCBUZWNobm9s
b2d5IEdyb3VwIC0gSUJNIFoxFjAUBgNVBAMMDUFURy1aIEhQVlMgQ0ExIjAgBgkq
hkiG9w0BCQEWE3NpbGxpbWFuQHVzLmlibS5jb20wHhcNMjAxMjEwMTkyODI4WhcN
MjIwMTA5MTkyODI4WjCBqDELMAkGA1UEBhMCVVMxETAPBgNVBAgMCFZpcmdpbmlh
MRAwDgYDVQQHDAdIZXJuZG9uMQwwCgYDVQQKDANJQk0xKjAoBgNVBAsMIUFkdmFu
Y2VkIFRlY2hub2xvZ3kgR3JvdXAgLSBJQk0gWjEWMBQGA1UEAwwNQVRHLVogSFBW
UyBDQTEiMCAGCSqGSIb3DQEJARYTc2lsbGltYW5AdXMuaWJtLmNvbTCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMAUfJAKBdbbCMn0N9DHvA4Chz/ihBBU
xsCaTAUmJpVzDjv49rYTXY9YcxQpNYKyexsKjDlCfr+9gNlus1tKU0CrZD63ZLiA
JCZZoomIZOoZQNquhj5f46/9x2d299FHxKY5z729hbHhHbjD+UkG60inyxS6Qm42
OaILx8bjrrcHyOzhwKn4zm3RsaEOWcgqJP8yQvH8Bm7UElmKLADI5Ngp/+WWvNFE
+QeXfYmKUSpLaJ0/4BD54Bbk780RSyOohvjv1O/JaLdHRXrJUYMSNNYQ3oK/7qRM
CjOBnuaFY9FSdaGNvY2vS5vM44TaCy5DyMZ1GLCrCb9y13TvEVA9jFMCAwEAAaNT
MFEwHQYDVR0OBBYEFN7BgpkfqiCTKIp/9JglwCDDgGJ5MB8GA1UdIwQYMBaAFN7B
gpkfqiCTKIp/9JglwCDDgGJ5MA8GA1UdEwEB/wQFMAMBAf8wDQYJKoZIhvcNAQEL
BQADggEBALFAM8/LQ9lkBAih7M6HrKR3efKh/Aj0UgRP6iYpprpW2H88Osw0lEnD
ZZ2CTKeaHMDFHBUHapprLM3B0UnE/hchMxb4xQKihls6MRk9w3ZlZdUseStLYbS5
LHkZWr2VnTjMg5n6QRaVEbJ/BE/65uzXAJ+3TukSRjeqnJUQlmOy+j3t6/hnuVhd
5t9FI3bbF5Qi4ZpwpBnaAH74MMu/fvh7MXjUcwxgHOIvnY204FoNB5koGc4S0OK+
sJ+dnL8L7J8Lq9mvi2+SmpU6lmWfAW09R5WsPomYIWKyTTplpt+4qJah87A4OSyJ
mgvWNcD4Irl+wTtS0FixMdiLA5Z2+n0=
-----END CERTIFICATE-----
</code></pre></div>
</details>
<p>The first and last lines are meant to assure you that this is a certificate, but the lines in between are less insightful, as it is <a href="https://en.wikipedia.org/wiki/Base64" target="_blank">base64-encoded</a> binary data. Fortunately the <em>openssl</em> utility comes to our rescue and allows us to print the certificate in a form that a human can hope to understand:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-in<span class="w"> </span>atgz-hpvs-ca.pem<span class="w"> </span>-text
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code>Certificate:
<span class="w">    </span>Data:
<span class="w">        </span>Version:<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">(</span>0x2<span class="o">)</span>
<span class="w">        </span>Serial<span class="w"> </span>Number:
<span class="w">            </span>6a:59:55:83:a1:ab:58:f7:e8:8b:0c:14:70:20:5d:07:e7:fb:90:f4
<span class="w">        </span>Signature<span class="w"> </span>Algorithm:<span class="w"> </span>sha256WithRSAEncryption
<span class="w">        </span>Issuer:<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>US,<span class="w"> </span><span class="nv">ST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Virginia,<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Herndon,<span class="w"> </span><span class="nv">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IBM,<span class="w"> </span><span class="nv">OU</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Advanced<span class="w"> </span>Technology<span class="w"> </span>Group<span class="w"> </span>-<span class="w"> </span>IBM<span class="w"> </span>Z,<span class="w"> </span><span class="nv">CN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ATG-Z<span class="w"> </span>HPVS<span class="w"> </span>CA,<span class="w"> </span><span class="nv">emailAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>silliman@us.ibm.com
<span class="w">        </span>Validity
<span class="w">            </span>Not<span class="w"> </span>Before:<span class="w"> </span>Dec<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">19</span>:28:28<span class="w"> </span><span class="m">2020</span><span class="w"> </span>GMT
<span class="w">            </span>Not<span class="w"> </span>After<span class="w"> </span>:<span class="w"> </span>Jan<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">19</span>:28:28<span class="w"> </span><span class="m">2022</span><span class="w"> </span>GMT
<span class="w">        </span>Subject:<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>US,<span class="w"> </span><span class="nv">ST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Virginia,<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Herndon,<span class="w"> </span><span class="nv">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>IBM,<span class="w"> </span><span class="nv">OU</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Advanced<span class="w"> </span>Technology<span class="w"> </span>Group<span class="w"> </span>-<span class="w"> </span>IBM<span class="w"> </span>Z,<span class="w"> </span><span class="nv">CN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ATG-Z<span class="w"> </span>HPVS<span class="w"> </span>CA,<span class="w"> </span><span class="nv">emailAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>silliman@us.ibm.com
<span class="w">        </span>Subject<span class="w"> </span>Public<span class="w"> </span>Key<span class="w"> </span>Info:
<span class="w">            </span>Public<span class="w"> </span>Key<span class="w"> </span>Algorithm:<span class="w"> </span>rsaEncryption
<span class="w">                </span>RSA<span class="w"> </span>Public-Key:<span class="w"> </span><span class="o">(</span><span class="m">2048</span><span class="w"> </span>bit<span class="o">)</span>
<span class="w">                </span>Modulus:
<span class="w">                    </span><span class="m">00</span>:c0:14:7c:90:0a:05:d6:db:08:c9:f4:37:d0:c7:
<span class="w">                    </span>bc:0e:02:87:3f:e2:84:10:54:c6:c0:9a:4c:05:26:
<span class="w">                    </span><span class="m">26</span>:95:73:0e:3b:f8:f6:b6:13:5d:8f:58:73:14:29:
<span class="w">                    </span><span class="m">35</span>:82:b2:7b:1b:0a:8c:39:42:7e:bf:bd:80:d9:6e:
<span class="w">                    </span>b3:5b:4a:53:40:ab:64:3e:b7:64:b8:80:24:26:59:
<span class="w">                    </span>a2:89:88:64:ea:19:40:da:ae:86:3e:5f:e3:af:fd:
<span class="w">                    </span>c7:67:76:f7:d1:47:c4:a6:39:cf:bd:bd:85:b1:e1:
<span class="w">                    </span>1d:b8:c3:f9:49:06:eb:48:a7:cb:14:ba:42:6e:36:
<span class="w">                    </span><span class="m">39</span>:a2:0b:c7:c6:e3:ae:b7:07:c8:ec:e1:c0:a9:f8:
<span class="w">                    </span>ce:6d:d1:b1:a1:0e:59:c8:2a:24:ff:32:42:f1:fc:
<span class="w">                    </span><span class="m">06</span>:6e:d4:12:59:8a:2c:00:c8:e4:d8:29:ff:e5:96:
<span class="w">                    </span>bc:d1:44:f9:07:97:7d:89:8a:51:2a:4b:68:9d:3f:
<span class="w">                    </span>e0:10:f9:e0:16:e4:ef:cd:11:4b:23:a8:86:f8:ef:
<span class="w">                    </span>d4:ef:c9:68:b7:47:45:7a:c9:51:83:12:34:d6:10:
<span class="w">                    </span>de:82:bf:ee:a4:4c:0a:33:81:9e:e6:85:63:d1:52:
<span class="w">                    </span><span class="m">75</span>:a1:8d:bd:8d:af:4b:9b:cc:e3:84:da:0b:2e:43:
<span class="w">                    </span>c8:c6:75:18:b0:ab:09:bf:72:d7:74:ef:11:50:3d:
<span class="w">                    </span>8c:53
<span class="w">                </span>Exponent:<span class="w"> </span><span class="m">65537</span><span class="w"> </span><span class="o">(</span>0x10001<span class="o">)</span>
<span class="w">        </span>X509v3<span class="w"> </span>extensions:
<span class="hll"><span class="w">            </span>X509v3<span class="w"> </span>Subject<span class="w"> </span>Key<span class="w"> </span>Identifier:<span class="w"> </span>
</span><span class="hll"><span class="w">                </span>DE:C1:82:99:1F:AA:20:93:28:8A:7F:F4:98:25:C0:20:C3:80:62:79
</span><span class="hll"><span class="w">            </span>X509v3<span class="w"> </span>Authority<span class="w"> </span>Key<span class="w"> </span>Identifier:<span class="w"> </span>
</span><span class="hll"><span class="w">                </span>keyid:DE:C1:82:99:1F:AA:20:93:28:8A:7F:F4:98:25:C0:20:C3:80:62:79
</span>
<span class="hll"><span class="w">            </span>X509v3<span class="w"> </span>Basic<span class="w"> </span>Constraints:<span class="w"> </span>critical
</span><span class="hll"><span class="w">                </span>CA:TRUE
</span><span class="w">    </span>Signature<span class="w"> </span>Algorithm:<span class="w"> </span>sha256WithRSAEncryption
<span class="w">        </span>b1:40:33:cf:cb:43:d9:64:04:08:a1:ec:ce:87:ac:a4:77:79:
<span class="w">        </span>f2:a1:fc:08:f4:52:04:4f:ea:26:29:a6:ba:56:d8:7f:3c:3a:
<span class="w">        </span>cc:34:94:49:c3:65:9d:82:4c:a7:9a:1c:c0:c5:1c:15:07:6a:
<span class="w">        </span>9a:6b:2c:cd:c1:d1:49:c4:fe:17:21:33:16:f8:c5:02:a2:86:
<span class="w">        </span>5b:3a:31:19:3d:c3:76:65:65:d5:2c:79:2b:4b:61:b4:b9:2c:
<span class="w">        </span><span class="m">79</span>:19:5a:bd:95:9d:38:cc:83:99:fa:41:16:95:11:b2:7f:04:
<span class="w">        </span>4f:fa:e6:ec:d7:00:9f:b7:4e:e9:12:46:37:aa:9c:95:10:96:
<span class="w">        </span><span class="m">63</span>:b2:fa:3d:ed:eb:f8:67:b9:58:5d:e6:df:45:23:76:db:17:
<span class="w">        </span><span class="m">94</span>:22:e1:9a:70:a4:19:da:00:7e:f8:30:cb:bf:7e:f8:7b:31:
<span class="w">        </span><span class="m">78</span>:d4:73:0c:60:1c:e2:2f:9d:8d:b4:e0:5a:0d:07:99:28:19:
<span class="w">        </span>ce:12:d0:e2:be:b0:9f:9d:9c:bf:0b:ec:9f:0b:ab:d9:af:8b:
<span class="w">        </span>6f:92:9a:95:3a:96:65:9f:01:6d:3d:47:95:ac:3e:89:98:21:
<span class="w">        </span><span class="m">62</span>:b2:4d:3a:65:a6:df:b8:a8:96:a1:f3:b0:38:39:2c:89:9a:
<span class="w">        </span>0b:d6:35:c0:f8:22:b9:7e:c1:3b:52:d0:58:b1:31:d8:8b:03:
<span class="w">        </span><span class="m">96</span>:76:fa:7d
-----BEGIN<span class="w"> </span>CERTIFICATE-----
MIIEMzCCAxugAwIBAgIUallVg6GrWPfoiwwUcCBdB+f7kPQwDQYJKoZIhvcNAQEL
BQAwgagxCzAJBgNVBAYTAlVTMREwDwYDVQQIDAhWaXJnaW5pYTEQMA4GA1UEBwwH
SGVybmRvbjEMMAoGA1UECgwDSUJNMSowKAYDVQQLDCFBZHZhbmNlZCBUZWNobm9s
b2d5IEdyb3VwIC0gSUJNIFoxFjAUBgNVBAMMDUFURy1aIEhQVlMgQ0ExIjAgBgkq
hkiG9w0BCQEWE3NpbGxpbWFuQHVzLmlibS5jb20wHhcNMjAxMjEwMTkyODI4WhcN
MjIwMTA5MTkyODI4WjCBqDELMAkGA1UEBhMCVVMxETAPBgNVBAgMCFZpcmdpbmlh
MRAwDgYDVQQHDAdIZXJuZG9uMQwwCgYDVQQKDANJQk0xKjAoBgNVBAsMIUFkdmFu
Y2VkIFRlY2hub2xvZ3kgR3JvdXAgLSBJQk0gWjEWMBQGA1UEAwwNQVRHLVogSFBW
UyBDQTEiMCAGCSqGSIb3DQEJARYTc2lsbGltYW5AdXMuaWJtLmNvbTCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMAUfJAKBdbbCMn0N9DHvA4Chz/ihBBU
xsCaTAUmJpVzDjv49rYTXY9YcxQpNYKyexsKjDlCfr+9gNlus1tKU0CrZD63ZLiA
JCZZoomIZOoZQNquhj5f46/9x2d299FHxKY5z729hbHhHbjD+UkG60inyxS6Qm42
OaILx8bjrrcHyOzhwKn4zm3RsaEOWcgqJP8yQvH8Bm7UElmKLADI5Ngp/+WWvNFE
+QeXfYmKUSpLaJ0/4BD54Bbk780RSyOohvjv1O/JaLdHRXrJUYMSNNYQ3oK/7qRM
CjOBnuaFY9FSdaGNvY2vS5vM44TaCy5DyMZ1GLCrCb9y13TvEVA9jFMCAwEAAaNT
MFEwHQYDVR0OBBYEFN7BgpkfqiCTKIp/9JglwCDDgGJ5MB8GA1UdIwQYMBaAFN7B
gpkfqiCTKIp/9JglwCDDgGJ5MA8GA1UdEwEB/wQFMAMBAf8wDQYJKoZIhvcNAQEL
BQADggEBALFAM8/LQ9lkBAih7M6HrKR3efKh/Aj0UgRP6iYpprpW2H88Osw0lEnD
ZZ2CTKeaHMDFHBUHapprLM3B0UnE/hchMxb4xQKihls6MRk9w3ZlZdUseStLYbS5
LHkZWr2VnTjMg5n6QRaVEbJ/BE/65uzXAJ+3TukSRjeqnJUQlmOy+j3t6/hnuVhd
5t9FI3bbF5Qi4ZpwpBnaAH74MMu/fvh7MXjUcwxgHOIvnY204FoNB5koGc4S0OK+
sJ+dnL8L7J8Lq9mvi2+SmpU6lmWfAW09R5WsPomYIWKyTTplpt+4qJah87A4OSyJ
mgvWNcD4Irl+wTtS0FixMdiLA5Z2+n0<span class="o">=</span>
-----END<span class="w"> </span>CERTIFICATE-----
</code></pre></div>
</details>
<p>A few lines of the output above have been highlighted. Notice the highlighted line that says <code>CA: TRUE</code>. This attribute indicates that this certificate is acting as a certification authority and can issue other certificates. Notice the lines above it which have values for <em>Subject Key Identifier</em> and <em>Authority Key Identifier</em>.  Subject Key Identifier is the identity of the holder of the certificate.  Authority Key Identifier is the identity of the issuer of the certificate. You can see that the values for these are the same.  This is known as a <em>self-signed certificate</em>.  Certification authorities (CA) exist in a hierarchy-  one CA can issue a certificate to another CA with the <em>CA: TRUE</em> attribute, and so forth.  In our lab we have this single, homegrown certification authority that we created, with its self-signed certificate that we created per the instructions in the Hyper Protect Virtual Servers documentation. </p>
<h2 id="create-a-grep11-server-x509-certificate-for-tls-authentication">Create a GREP11 server X.509 certificate for TLS authentication<a class="headerlink" href="#create-a-grep11-server-x509-certificate-for-tls-authentication" title="Permanent link">&para;</a></h2>
<p>Once we created a "homegrown" certification authority, we next created an X.509 certificate for our GREP11 server. This certificate was issued by our certification authority.</p>
<p>The first step was to create another RSA private key that our GREP11 server will use:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>grep11-server80-9876-key.pem<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The value of the <code>-out</code> argument, <code>grep11-server80-9876-key.pem</code> can be whatever you want it to be. I named it what I did for a reason.  The <em>80</em> in <em>server80</em> is for the last octet of my Hyper Protect Virtual Servers LPAR's IP adresss, 192.168.22.80, and I intend to use this certificate for a GREP11 server listening on port 9876 on one of the LPAR's Crypto Express 7S domains.</p>
</div>
<p>Then, this private key was used as input to <em>openssl</em> in order to create a <em>certificate signing request</em>:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>grep11-server80-9876-key.pem<span class="w"> </span>-out<span class="w"> </span>grep11-server80-9876.csr
</code></pre></div>
<p>The certificate signing request will be passed to our certification authority which will use the information to create an X.509 certificate.  We used <em>openssl</em> for this, too:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-sha256<span class="w"> </span>-req<span class="w"> </span>-in<span class="w"> </span>grep11-server80-9876.csr<span class="w"> </span>-CA<span class="w"> </span>atgz-hpvs-ca.pem<span class="w"> </span>-CAkey<span class="w"> </span>atgz-hpvs-ca.key<span class="w"> </span>-set_serial<span class="w"> </span><span class="m">8086</span><span class="w"> </span>-extfile<span class="w"> </span>openssl.cnf<span class="w"> </span>-extensions<span class="w"> </span>server<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>-outform<span class="w"> </span>PEM<span class="w"> </span>-out<span class="w"> </span>grep11-server80-9876.pem
</code></pre></div>
<p>The file name of the certificate that was created by the preceding command is the value of the <code>-out</code> argument, <code>grep11-server80-9876.pem</code>.  <code>openssl</code> allows us to list this certificate in human-friendly form:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-in<span class="w"> </span>grep11-server80-9876.pem<span class="w"> </span>-noout<span class="w"> </span>-text
</code></pre></div>
<details class="example">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 8086 (0x1f96)
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Advanced Technology Group - IBM Z, CN = ATG-Z HPVS CA, emailAddress = silliman@us.ibm.com
        Validity
            Not Before: Dec 10 19:28:28 2020 GMT
            Not After : Jan  4 19:28:28 2022 GMT
        Subject: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Advanced Technology Group - IBM Z, CN = 192.168.22.80
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    00:d9:c4:97:86:cc:d9:a8:d7:0e:e4:d5:7e:6a:97:
                    e6:03:f4:85:4c:4d:2f:c5:bc:1e:88:da:ab:31:68:
                    3b:1b:b7:eb:ae:81:a6:0f:34:1f:b0:90:bb:a7:1a:
                    7a:2c:c1:6b:be:b6:8b:9d:b4:b8:71:78:ff:fb:84:
                    61:c4:22:4e:8f:42:52:90:15:de:58:c8:1f:3d:5d:
                    3c:15:c7:9f:9d:bb:13:c4:0c:d8:a1:53:83:56:18:
                    ec:75:fd:69:5a:f4:ed:6e:61:5e:f0:1b:57:58:7c:
                    89:28:5b:b7:81:c9:6d:4e:fa:63:33:a1:98:ee:7a:
                    18:5b:ad:c5:53:8a:fe:3e:c7:99:07:7f:45:e2:15:
                    fa:2a:bc:e2:eb:2a:dc:7e:38:7a:8c:ec:1f:89:b1:
                    e3:91:6f:1a:36:d3:17:03:54:c3:56:57:65:7f:d4:
                    6b:56:dc:94:21:d9:5d:43:06:26:a6:fa:48:06:85:
                    95:e9:f3:10:b3:26:cb:69:c3:67:28:d3:ef:74:40:
                    50:7b:2a:f9:56:20:79:e4:92:64:2d:ea:6b:bc:07:
                    2a:95:3e:d2:80:5e:c5:61:b7:84:ca:63:83:e0:0a:
                    67:fe:e3:9c:af:12:54:f0:22:82:b3:84:30:87:08:
                    b5:8c:bf:05:af:dd:80:94:a3:0f:39:d4:d7:2e:d5:
                    d3:e7
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            X509v3 Key Usage: 
                Digital Signature, Key Encipherment, Data Encipherment
            X509v3 Extended Key Usage: 
                TLS Web Server Authentication
            Netscape Cert Type: 
                SSL Server
            X509v3 CRL Distribution Points: 

                Full Name:
                URI:http://localhost/ca.crl

            X509v3 Subject Alternative Name: 
                DNS:192.168.22.80:9876, IP Address:192.168.22.80
    Signature Algorithm: sha256WithRSAEncryption
        1f:bb:b0:26:34:62:82:62:ca:7f:1c:a6:ef:54:15:d9:44:88:
        e4:97:19:5b:2c:fc:dd:1c:01:70:ee:27:1c:ec:49:58:25:a5:
        dc:9e:9a:55:71:9b:05:bb:c1:1b:6e:85:a3:ab:9c:ce:05:bf:
        29:3b:cb:ed:98:f5:01:e8:cb:e2:e6:14:c1:74:0d:96:38:14:
        58:ca:84:ad:af:35:fd:12:50:16:10:f3:6d:c1:fe:ba:04:12:
        ea:19:17:dd:95:a8:8b:65:83:da:bc:ef:6e:23:00:2c:52:6e:
        80:af:a9:93:7a:5f:40:8d:e7:55:ea:1d:90:d8:8c:04:59:91:
        91:b4:22:19:9f:9a:b6:20:ee:36:4d:c1:75:29:54:e1:a0:47:
        cd:82:14:86:75:37:60:4e:1a:54:f5:81:ec:5a:3a:de:64:93:
        51:fb:c6:44:b1:66:d7:41:59:b6:95:27:c9:81:fc:d9:76:a5:
        f2:16:74:47:8c:c8:a3:b1:1d:f3:98:34:b1:fa:52:d9:3e:d1:
        63:8b:70:d3:a3:aa:ac:47:1c:90:13:76:df:98:47:ae:19:e2:
        c4:d5:81:eb:44:66:45:09:6a:75:c6:5f:0c:aa:e0:44:52:16:
        35:be:49:f0:10:65:3f:df:a3:50:0d:3b:ae:94:59:9c:28:a5:
        41:24:a5:45
</code></pre></div>
</details>
<h2 id="create-an-x509-certificate-for-your-client-application-for-tls-authentication">Create an X.509 certificate for your client application for TLS authentication<a class="headerlink" href="#create-an-x509-certificate-for-your-client-application-for-tls-authentication" title="Permanent link">&para;</a></h2>
<p>The client applications need a certificate that is issued by the same certification authority that the GREP11 server uses. The process is similar- create a private key, pass that as input for the creation of a certificte signing request, and then pass that to the certification authority in order to receive a certificate.  We used these commands:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>genrsa<span class="w"> </span>-out<span class="w"> </span>client-key.pem<span class="w"> </span><span class="m">2048</span>
</code></pre></div>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>req<span class="w"> </span>-new<span class="w"> </span>-key<span class="w"> </span>client-key.pem<span class="w"> </span>-out<span class="w"> </span>client.csr
</code></pre></div>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-req<span class="w"> </span>-days<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-in<span class="w"> </span>client.csr<span class="w"> </span>-CA<span class="w"> </span>ca.pem<span class="w"> </span>-CAcreateserial<span class="w"> </span>-CAkey<span class="w"> </span>ca.key<span class="w"> </span>-out<span class="w"> </span>client.pem
</code></pre></div>
<p>Here is a listing of the client certificate that you will be using in the lab. It will be configured properly for you so that your client program can present it to the GREP11 server:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>openssl<span class="w"> </span>x509<span class="w"> </span>-in<span class="w"> </span>client.pem<span class="w"> </span>-noout<span class="w"> </span>-text
</code></pre></div>
<details class="example">
<summary>Example Output</summary>
<div class="highlight"><pre><span></span><code>Certificate:
    Data:
        Version: 1 (0x0)
        Serial Number:
            7a:dc:83:ab:72:46:2f:30:b9:d2:71:b4:9b:00:43:4f:53:63:a7:ce
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Advanced Technology Group - IBM Z, CN = ATG-Z HPVS CA, emailAddress = silliman@us.ibm.com
        Validity
            Not Before: Dec 10 19:28:28 2020 GMT
            Not After : Mar 20 19:28:28 2021 GMT
<span class="hll">        Subject: C = US, ST = Virginia, L = Herndon, O = IBM, OU = Advanced Technology Group - IBM Z, CN = GREP11 Lab Student, emailAddress = silliman@us.ibm.com
</span>        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                RSA Public-Key: (2048 bit)
                Modulus:
                    00:d2:4f:86:c1:d6:9a:6b:f4:2c:7d:6f:91:59:b9:
                    98:12:6e:d1:5f:ea:ca:90:b4:74:0e:dd:99:ce:20:
                    ca:f6:75:df:fe:54:76:ef:fd:3a:a2:f9:cf:15:0d:
                    1e:19:5c:e5:0f:55:50:ff:64:7f:2b:a6:1f:35:8b:
                    38:f8:f4:2a:a6:c7:66:0c:ef:17:d9:40:46:fb:d1:
                    ca:28:dd:a0:6b:08:28:b9:55:95:9d:cc:67:9b:f4:
                    26:da:04:76:fb:d3:02:e3:8e:af:f7:c3:4c:01:30:
                    04:47:e3:e3:0a:58:33:47:8e:11:50:1d:1a:ca:30:
                    a8:09:76:fc:b9:a7:86:05:2b:46:44:f6:dd:48:e2:
                    5e:64:78:8b:06:42:32:5f:cf:7d:e6:80:e1:32:94:
                    6f:fe:8a:b9:f5:a1:3a:c0:d5:3a:c7:5f:4e:e3:7b:
                    2e:0f:58:a2:35:26:57:0c:0d:c7:7f:2d:8f:8c:09:
                    84:ee:eb:d4:0e:da:5a:3a:e3:09:2f:f2:be:b9:b0:
                    48:cd:c7:d0:4c:03:d6:25:68:5d:5f:7e:3a:b1:9b:
                    4b:a4:09:b3:40:30:be:6d:be:9c:de:77:e7:18:4c:
                    ff:6d:cf:70:9c:37:bd:8e:5b:6d:75:1f:a5:c2:55:
                    ec:38:25:c9:cd:38:4b:8e:63:47:63:4e:e7:90:21:
                    6b:a1
                Exponent: 65537 (0x10001)
    Signature Algorithm: sha256WithRSAEncryption
        ac:89:54:fc:40:06:1f:84:99:08:f8:70:ab:b0:24:1d:b3:6c:
        a2:86:bd:b8:82:e3:6d:aa:c1:c7:7a:b8:3c:1d:59:80:89:92:
        57:07:ca:28:cd:80:de:11:e7:ed:d9:40:29:0b:90:1a:b7:9b:
        ed:b5:15:6a:6c:1c:31:3f:82:0f:01:1f:64:05:bb:12:16:67:
        d2:b2:3d:84:ef:74:34:56:80:11:69:ab:85:5b:43:ac:ba:13:
        e2:ca:b3:12:4a:39:ff:f1:4f:47:60:e9:16:49:75:34:95:1d:
        e0:51:c4:05:96:5e:1b:50:31:cf:ba:1a:a5:e1:1f:ed:8b:62:
        84:6d:a4:f3:6c:d4:20:d1:f1:b1:6e:79:de:57:c9:93:f7:12:
        68:86:45:dd:f4:2d:a9:c9:41:b4:6c:5e:79:01:5a:91:64:a1:
        01:14:c5:81:04:fb:64:7e:d1:42:ef:2c:e8:9f:6c:ba:b9:01:
        53:4b:32:30:0f:2a:30:4d:84:d1:11:a6:b6:cc:56:58:b0:1c:
        4f:ea:dc:3e:6e:4f:60:5b:ed:a1:0d:c8:f1:6b:dc:1a:05:00:
        ad:a9:72:ce:ff:d1:d6:ae:0a:a9:56:36:5a:ab:d0:33:41:59:
        80:8f:17:90:8a:71:f6:df:bd:6c:8e:4b:10:5d:5b:8f:94:9a:
        2d:03:85:0b
</code></pre></div>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the lab, each student will use a copy of the same client certificate. In most production use cases each client would use their own certificate which uniquely identifies them.</p>
</div>
<h2 id="list-crypto-domains-on-your-hyper-protect-virtual-servers-lpar">List Crypto Domains on your Hyper Protect Virtual Servers LPAR<a class="headerlink" href="#list-crypto-domains-on-your-hyper-protect-virtual-servers-lpar" title="Permanent link">&para;</a></h2>
<p>You can list your available domains with the Hyper Protect Virtual Server CLI:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The command shown below is for reference only</strong>- it has already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<div class="highlight"><pre><span></span><code>hpvs<span class="w"> </span>crypto<span class="w"> </span>list
</code></pre></div>
<details class="example" open="open">
<summary>Example output</summary>
<div class="highlight"><pre><span></span><code> hpvs crypto list
+---------------+--------+
| CRYPTO.DOMAIN | STATUS |
+---------------+--------+
| 08.0016       | online |
| 0a.0016       | online |
+---------------+--------+
</code></pre></div>
</details>
<p>The values shown in the <strong>CRYPTO.DOMAIN</strong> column are in hexadecimal.  So, translating to decimal, our LPAR is using Crypto Express 7S cards 8 and 10, with domain 22 in both cards assigned to our LPAR.  (A Crypto Express 7S card can have up to 85 domains- think of each domain as a "virtual" Crypto Express 7S card).</p>
<h2 id="create-yaml-or-json-configuration-files-for-grep11-server">Create YAML or JSON configuration files for GREP11 server<a class="headerlink" href="#create-yaml-or-json-configuration-files-for-grep11-server" title="Permanent link">&para;</a></h2>
<p>There are two alternative ways to start your GREP11 server:</p>
<ol>
<li>Using <code>hpvs deploy</code> with a YAML file as input</li>
<li>Using <code>hpvs vs create</code> with a JSON file as input</li>
</ol>
<p>I will show both the YAML and JSON files first, then I will show both methods of starting the GREP11 server.</p>
<h3 id="yaml-file-for-grep11-server-configuration">YAML file for GREP11 server configuration<a class="headerlink" href="#yaml-file-for-grep11-server-configuration" title="Permanent link">&para;</a></h3>
<p>This is the YAML file for a GREP11 server that will listen for client connections on port 9876, and will use domain 22 (hex 16) of Crypto Express 7S card 08:</p>
<details class="example">
<summary>GREP11 server YAML configuration file</summary>
<div class="highlight"><pre><span></span><code>version:<span class="w"> </span>v1<span class="w"> </span>
<span class="c1">#</span>
<span class="c1"># use this file with the &#39;hpvs deploy&#39; command, e.g.,</span>
<span class="c1">#</span>
<span class="c1">#  hpvs deploy --config $HOME/hpvs/config/grep11/vs_grep11_80-9876.yml </span>
<span class="c1">#</span>
type:<span class="w"> </span>virtualserver
virtualservers:
-<span class="w"> </span>name:<span class="w"> </span>grep11-08-0016-9876
host:<span class="w"> </span>atgzlpar80
repoid:<span class="w"> </span>hpcsKpGrep11_runq
imagetag:<span class="w"> </span><span class="m">1</span>.2.1
imagefile:<span class="w"> </span>hpcsKpGrep11_runq.tar.gz
crypto:
<span class="w">    </span>crypto_matrix:
<span class="hll"><span class="w">    </span>-<span class="w"> </span><span class="m">08</span>.0016
</span>environment:
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_DOMAIN
<span class="hll"><span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;08.0016&quot;</span>
</span><span class="c1">#</span>
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_CONNECTION_TLS_CERTFILEBYTES
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;@/home/hyper-protect-lab/hpvs/config/grep11/keys/grep11-server80-9876.pem&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_CONNECTION_TLS_KEYFILEBYTES
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;@/home/hyper-protect-lab/hpvs/config/grep11/keys/grep11-server80-9876-key.pem&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_CONNECTION_TLS_CACERTBYTES
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;@/home/hyper-protect-lab/hpvs/config/grep11/keys/atgz-hpvs-ca.pem&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_CONNECTION_TLS_ENABLED
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_CONNECTION_TLS_MUTUAL
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>EP11SERVER_EP11CRYPTO_ENABLED
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;true&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>TLS_GRPC_CERTS_DOMAIN_CRT
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;\\n&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>TLS_GRPC_CERTS_DOMAIN_KEY
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;\\n&quot;</span>
-<span class="w"> </span>key:<span class="w"> </span>TLS_GRPC_CERTS_ROOTCA_CRT
<span class="w">    </span>value:<span class="w"> </span><span class="s2">&quot;\\n&quot;</span>
ports:
<span class="hll">-<span class="w"> </span>hostport:<span class="w"> </span><span class="m">9876</span>
</span><span class="w">    </span>protocol:<span class="w"> </span>tcp
<span class="w">    </span>containerport:<span class="w"> </span><span class="m">9876</span>
</code></pre></div>
</details>
<h3 id="json-file-for-grep11-server-configuration">JSON file for GREP11 server configuration<a class="headerlink" href="#json-file-for-grep11-server-configuration" title="Permanent link">&para;</a></h3>
<p>This is a JSON file for a GREP11 server that will listen for client connections on port 9876, and will use domain 22 (hex 16) of Crypto Express 7S card 08:</p>
<details class="example">
<summary>GREP11 server JSON configuration file</summary>
<div class="highlight"><pre><span></span><code>{
<span class="hll">&quot;EP11SERVER_EP11CRYPTO_DOMAIN&quot;:&quot;08.0016&quot;,
</span>&quot;EP11SERVER_EP11CRYPTO_CONNECTION_TLS_CERTFILEBYTES&quot;:&quot;@/home/hyper-protect-lab/hpvs/config/grep11/keys/grep11-server80-9876.pem&quot;,
&quot;EP11SERVER_EP11CRYPTO_CONNECTION_TLS_KEYFILEBYTES&quot;:&quot;@/home/hyper-protect-lab/hpvs/config/grep11/keys/grep11-server80-9876-key.pem&quot;,
&quot;EP11SERVER_EP11CRYPTO_CONNECTION_TLS_CACERTBYTES&quot;:&quot;@/home/hyper-protect-lab/hpvs/config/grep11/keys/atgz-hpvs-ca.pem&quot;,
&quot;EP11SERVER_EP11CRYPTO_CONNECTION_TLS_ENABLED&quot;:true,
&quot;EP11SERVER_EP11CRYPTO_CONNECTION_TLS_MUTUAL&quot;:true,
&quot;EP11SERVER_EP11CRYPTO_ENABLED&quot;:true,
&quot;TLS_GRPC_CERTS_DOMAIN_CRT&quot;:&quot;\\n&quot;,
&quot;TLS_GRPC_CERTS_DOMAIN_KEY&quot;:&quot;\\n&quot;,
&quot;TLS_GRPC_CERTS_ROOTCA_CRT&quot;:&quot;\\n&quot;
}
</code></pre></div>
</details>
<h2 id="start-the-grep11-server">Start the GREP11 server<a class="headerlink" href="#start-the-grep11-server" title="Permanent link">&para;</a></h2>
<p>If you looked carefully at the JSON file and the YAML file in the previous section, you may have noticed that the YAML file contains more information than the JSON file contains.  As a result, the syntax is simpler for the command that uses the YAML file.  The command that uses the JSON file uses command line arguments to provide some of the information that the YAML file contained.  Compare the two methods:</p>
<div class="admonition reminder">
<p class="admonition-title">Reminder</p>
<p><strong>The commands shown below are for reference only</strong>- they have already been performed by the lab instructors in order to set up the lab environment for you.</p>
</div>
<details class="example" open="open">
<summary>Command to start the GREP11 server with the YAML file</summary>
<div class="highlight"><pre><span></span><code>hpvs deploy --config $HOME/hpvs/config/grep11/vs_grep11_80-9876.yml
</code></pre></div>
</details>
<details class="example" open="open">
<summary>Command to start the GREP11 server with the JSON file</summary>
<div class="highlight"><pre><span></span><code>hpvs vs create --name grep11-08-0016-9876 --repo hpcsKpGrep11_runq --tag 1.2.2.1 --crypto_matrix=08.0016 --cpu 2 --ram 2048 --envjsonpath ${HOME}/hpvs/config/grep11/grep11_env_08.0016.json --ports &quot;{containerport = 9876, protocol = tcp, hostport = 9876}&quot;
</code></pre></div>
</details>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>Starting now, as you navigate to the next section of the lab, you should enter all the commands shown in the lab.</strong>  Only the commands in this section were for reference.</p>
</div>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>The GREP11 server is a feature provided by Hyper Protect Virtual Servers. You are not required to use it. If you do not use this feature, you do not have to define Crypto Express domains to the LPAR.  You may wish to for other purposes, and you can use the other modes offered by Crypto Express cards for those purposes, but you must use EP11 mode for usage by the GREP11 server.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../overview/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Lab overview" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
                Lab overview
              </div>
            </div>
          </a>
        
        
          
          <a href="../grep11-display/" class="md-footer__link md-footer__link--next" aria-label="Next: Displaying your GREP11 environment" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
                Displaying your GREP11 environment
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ibm-wsc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/u/s390x" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.sections", "navigation.expand", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.footer", "search.share", "navigation.indexes", "announce.dismiss", "content.tabs.link", "content.code.copy", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6df46069.min.js"></script>
      
    
  </body>
</html>