
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../images/hpvs-logo.svg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>Run the GREP11 sample code - Hyper Protect Virtual Servers (HPVS) Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-174658170-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
      
        <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#run-the-grep11-sample-code" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Hyper Protect Virtual Servers (HPVS) Workshop" class="md-header-nav__button md-logo" aria-label="Hyper Protect Virtual Servers (HPVS) Workshop">
      
  <img src="../../images/hpvs-logo.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Hyper Protect Virtual Servers (HPVS) Workshop
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Run the GREP11 sample code
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Hyper Protect Virtual Servers (HPVS) Workshop" class="md-nav__button md-logo" aria-label="Hyper Protect Virtual Servers (HPVS) Workshop">
      
  <img src="../../images/hpvs-logo.svg" alt="logo">

    </a>
    Hyper Protect Virtual Servers (HPVS) Workshop
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../assignment/" class="md-nav__link">
      Lab Assignments
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    <label class="md-nav__link" for="nav-3">
      GREP11 Lab
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="GREP11 Lab" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        GREP11 Lab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../overview/" class="md-nav__link">
      Lab overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../grep11-setup/" class="md-nav__link">
      How to set up a GREP11 server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../grep11-display/" class="md-nav__link">
      Displaying your GREP11 environment
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Run the GREP11 sample code
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Run the GREP11 sample code
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#clone-the-github-repository-which-has-the-source-code" class="md-nav__link">
    Clone the GitHub repository which has the source code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-grep11-sample-code_1" class="md-nav__link">
    Run the GREP11 sample code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explanation-of-grep11-sample-code" class="md-nav__link">
    Explanation of GREP11 sample code
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5" >
    <label class="md-nav__link" for="nav-3-5">
      Run the Lab exercises
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Run the Lab exercises" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        <span class="md-nav__icon md-icon"></span>
        Run the Lab exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../exercise-overview/" class="md-nav__link">
      An overview of the Exercises
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-exercise1/" class="md-nav__link">
      Exercise 1 (List PKCS Mechanisms)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-exercise2/" class="md-nav__link">
      Exercise 2 (Encryption and Decryption)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-exercise3/" class="md-nav__link">
      Exercise 3 (Sign and Verify)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab-exercise4/" class="md-nav__link">
      Exercise 4 (Wrap and Unwrap Key)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    <label class="md-nav__link" for="nav-4">
      Secure Image Build Lab
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Secure Image Build Lab" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Secure Image Build Lab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../prerequisites/" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/overview/" class="md-nav__link">
      Hyper Protect Virtual Servers (HPVS) Lab Process Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/securebuild-setup/" class="md-nav__link">
      Configuring your Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/create-server/" class="md-nav__link">
      Create your HPVS Secure Build Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/build/" class="md-nav__link">
      Securely Build your Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/deploy-app/" class="md-nav__link">
      Deploy your Securely Built Application as a Hyper Protect Virtual Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/bitcoin_wallet/" class="md-nav__link">
      Welcome to the Secure Bitcoin Wallet on IBM LinuxONE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../securebuild-lab/cleanup/" class="md-nav__link">
      Clean up your Environment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../glossary/" class="md-nav__link">
      Glossary of terms
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../resources/" class="md-nav__link">
      Other resources
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../proposechange/" class="md-nav__link">
      Propose a change
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#clone-the-github-repository-which-has-the-source-code" class="md-nav__link">
    Clone the GitHub repository which has the source code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-grep11-sample-code_1" class="md-nav__link">
    Run the GREP11 sample code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#explanation-of-grep11-sample-code" class="md-nav__link">
    Explanation of GREP11 sample code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm-wsc/hyper-protect-virtual-servers-workshop/edit/master/docs/grep11-lab/run-grep11-samples.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="run-the-grep11-sample-code">Run the GREP11 Sample code<a class="headerlink" href="#run-the-grep11-sample-code" title="Permanent link">&para;</a></h1>
<h2 id="clone-the-github-repository-which-has-the-source-code">Clone the GitHub repository which has the source code<a class="headerlink" href="#clone-the-github-repository-which-has-the-source-code" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Change to the <code>/home/hyper-protect-lab/go/src/github.com/ibm-developer</code> directory</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/go/src/github.com/ibm-developer
</code></pre></div>
</li>
<li>
<p>Ensure you are in the directory mentioned in the prior step<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>. You may be able to tell from the command prompt. 
You can also enter the <code>pwd</code> ("print working directory") to be sure, e.g.,:</p>
<div class="highlight"><pre><span></span><code><span class="nb">pwd</span>
</code></pre></div>
<details class="example" open="open"><summary>Example Output</summary><div class="highlight"><pre><span></span><code>/home/hyper-protect-lab/go/src/github.com/ibm-developer
</code></pre></div>
</details>
</li>
<li>
<p>Clone the GitHub repository used in this lab:</p>
<div class="highlight"><pre><span></span><code>git clone https://github.com/silliman/ibm-cloud-hyperprotectcrypto.git
</code></pre></div>
<details class="example" open="open"><summary>Example Output</summary><div class="highlight"><pre><span></span><code>Cloning into &#39;ibm-cloud-hyperprotectcrypto&#39;...
remote: Enumerating objects: 821, done.
remote: Counting objects: 100% (821/821), done.
remote: Compressing objects: 100% (551/551), done.
remote: Total 821 (delta 227), reused 821 (delta 227), pack-reused 0
Receiving objects: 100% (821/821), 9.30 MiB | 8.42 MiB/s, done.
Resolving deltas: 100% (227/227), done.
</code></pre></div>
</details>
</li>
<li>
<p>Change to the <code>ibm-cloud-hyperprotectcrypto</code> directory which the prior <code>git clone</code> command created:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> ibm-cloud-hyperprotectcrypto
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use the <code>pwd</code> command if you cannot already tell by your command prompt that you are in the <code>/home/hyper-protect-lab/go/src/github.com/ibm-developer/ibm-cloud-hyperprotectcrypto</code> directory.</p>
</div>
</li>
</ol>
<h2 id="run-the-grep11-sample-code_1">Run the GREP11 sample code<a class="headerlink" href="#run-the-grep11-sample-code_1" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Start Visual Studio Code within your current directory:</p>
<div class="highlight"><pre><span></span><code>code .  <span class="c1"># if typing by hand don&#39;t forget the period (for current directory)</span>
</code></pre></div>
<p>In a moment you should see the Visual Studio Code window with your current directory structure shown in the Explorer pane in the upper left corner of the window:</p>
<p><img alt="Open VS Code" src="../images/grep11-0010_open-vscode.png" /></p>
</li>
<li>
<p>Expand the <code>golang</code> folder, and then expand the <code>examples</code> folder underneath it. Your Explorer pane should then look similar to this:</p>
<p><img alt="Navigate to golang/examples" src="../images/grep11-0020_nav-golang-examples.png" /></p>
</li>
<li>
<p>From the Visual Studio Code menu, select <em>View</em> then <em>Terminal</em>, as shown below:</p>
<p><img alt="Select View-&gt;Terminal" src="../images/grep11-0030_view-terminal.png" /></p>
</li>
<li>
<p>You will see a terminal appear within Visual Studio Code at the bottom:</p>
<p><img alt="Terminal" src="../images/grep11-0040_terminal.png" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you hover your mouse over the line above the terminal, when it turns into the "double arrow" as highlighted in the above screen snippet, you can drag the line to resize your terminal window. This tip may come in handy for you during the course of the lab.</p>
</div>
</li>
<li>
<p>Change to the <code>golang/examples</code> directory within the Visual Studio Code terminal that you just opened:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> golang/examples
</code></pre></div>
<p>Your terminal will look like this:</p>
<p><img alt="Change to golang/examples" src="../images/grep11-0050_cd-golang-examples.png" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>I have shown you how to use the Terminal window with Visual Studio Code, which you may find convenient.  Your Ubuntu Desktop also provides a Terminal application that you can use to open one or more terminal windows.  They behave the same, and which one you use is a personal choice, as long as you are in the correct directory that the instructions expect you to be in.</p>
<p>It is convenient to have a terminal window inside Visual Studio Code, but it comes at the expense of some screen real estate being taken away from the source code used in the exercises.</p>
<p>Use whichever method works best for you.</p>
</div>
</li>
<li>
<p>Test the GREP11 sample code:</p>
<div class="highlight"><pre><span></span><code>go <span class="nb">test</span> -v
</code></pre></div>
<details class="example" open="open"><summary>Example Output</summary><div class="highlight"><pre><span></span><code>=== RUN   Example_getMechanismInfo
--- PASS: Example_getMechanismInfo (0.29s)
=== RUN   Example_encryptAndDecrypt
--- PASS: Example_encryptAndDecrypt (0.84s)
=== RUN   Example_digest
--- PASS: Example_digest (0.55s)
=== RUN   Example_signAndVerifyUsingRSAKeyPair
--- PASS: Example_signAndVerifyUsingRSAKeyPair (0.50s)
=== RUN   Example_signAndVerifyUsingECDSAKeyPair
--- PASS: Example_signAndVerifyUsingECDSAKeyPair (0.52s)
=== RUN   Example_signAndVerifyToTestErrorHandling
--- PASS: Example_signAndVerifyToTestErrorHandling (0.51s)
=== RUN   Example_wrapAndUnwrapKey
--- PASS: Example_wrapAndUnwrapKey (0.41s)
=== RUN   Example_deriveKey
--- PASS: Example_deriveKey (0.61s)
=== RUN   Example_tls
--- PASS: Example_tls (0.40s)
PASS
ok      github.com/ibm-developer/ibm-cloud-hyperprotectcrypto/golang/examples   4.653s
</code></pre></div>
</details>
</li>
</ol>
<h2 id="explanation-of-grep11-sample-code">Explanation of GREP11 sample code<a class="headerlink" href="#explanation-of-grep11-sample-code" title="Permanent link">&para;</a></h2>
<p>The test used the <em>go test</em> subcommand, which does the following:</p>
<ol>
<li>
<p>It looks for any file in the current directory named <em>something</em>_test.go. There are two such files in our directory, <em>server_test.go</em> and <em>tls_test.go</em>.</p>
</li>
<li>
<p>It looks for functions in these files named Example_<em>something</em>, and executes these functions.</p>
</li>
<li>
<p>At the bottom of each of these functions, a series of comment lines, starting with a header line, specifies what the expected output from the function should be. If the output from the function call matches the lines (except for the header line), then the test passes.  Otherwise the test fails.</p>
</li>
</ol>
<p>In the explorer pane, click on <em>server_test.go</em> or <em>tls_test.go</em> and examine the source code to see these lines.  For example, lines 222-227 in <em>server_test.go</em> indicate what the expected output of the <em>Example_encryptAndDecrypt</em> function should be:</p>
<div class="highlight"><pre><span></span><code>// Output:
// Generated AES Key
// Generated IV
// Encrypted message
// Decrypted message
// Hello, this is a very long and creative message without any imagination
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Go is a compiled language, and there are no executable files in this directory-  the 'go test' command compiles the source code in the directory into an executable file in order to run the tests, and then cleans up afterwards by removing this executable.</p>
</div>
<p>Here is an itemization of the functions that our <code>go test -v</code> command tested, with a brief description of each.  Our lab exercises in the subsequent sections will go into a little more depth on some of the more interesting of these functions.</p>
<ol>
<li>
<p><em>Example_getMechanismInfo</em> gets a list of PKCS #11 Mechanisms and then retrieves information about one of them.  We will delve deeper into this in the first exercise.</p>
</li>
<li>
<p><em>Example_encryptAndDecrypt</em> creates a secret (i.e., symmetric) key, encrypts data with it, then decrypts it, and ensures the data was unchanged after going through the encryption and decryption.  We will look more into this in the second exercise.</p>
</li>
<li>
<p><em>Example_digest</em> creates a digest<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>, or hash, against some data. Digests are used in digital signatures, which the next two tests cover.</p>
</li>
<li>
<p><em>Example_signAndVerifyUsingRSAKeyPair</em> creates an RSA public and private key pair and uses the private key to create a digital signature and the public key to verify the digital signature.</p>
</li>
<li>
<p><em>Example_signAndVerifyUsingECDSAKeyPair</em> creates an elliptic curve public and private key pair and uses the private key to create a digital signature and uses the public key to verify the digital signature. We go into greater depth (and discuss the differences between RSA and Elliptic Curves) in the third exercise.</p>
</li>
<li>
<p><em>Example_signAndVerifyToTestErrorHandling</em> intentionally causes an error-  after a signature is created, the program modifies a byte in it, so that when the signature is verified later, an error occurs. The test passes because the expected error message is listed in the expected test output.</p>
</li>
<li>
<p><em>Example_wrapAndUnwrapKey</em> creates a public and private key pair and uses the public key to encrypt, or wrap, a symmetric key, which can then only be decrypted, or unwrapped, by the private key.  The fourth and final exercise covers this topic.</p>
</li>
<li>
<p><em>Example_deriveKey</em> illustrates a common algorithm where two sides of a connection each have a public and private key pair, and they use each other's public key in an algorithm that allows each of them to derive an identical secret, i.e., symmetric, key, without ever having sent that secret key across the connection.  This is a common use case because encryption and decryption with a symmetric key is much faster than encryption and decryption with public and private keys.  The two parties use relatively slow public key cryptography to derive this shared symmetric key at the beginning of their session, and then switch to using this symmetric key for the remainder of the session.  This function and all of the functions preceding it in this list are in the <em>server_test.go</em> source file.</p>
</li>
<li>
<p><em>Example_tls</em> creates an X.509 certificate, starts up an http server that uses this certificate, and has a client connect to the server with TLS authentication, which uses this certificate to establish a session.  This test is in the <em>tls_test.go</em> source file.</p>
</li>
</ol>
<p>Please proceed to the next section.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>The Go compiler has traditionally been very picky about where source code files must reside. This situation has eased recently with the introduction of <em>Go modules</em> in newer releases, but our lab is not using Go modules.  Go expects to find source files in the ${GOPATH}/src directory hierarchy, and if you do not have the GOPATH environment variable set, it expects fo find source files in the ${HOME}/go/src directory hierarchy.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>A hash is a fixed-length fingerprint for a set of input data of any size.  Since there are an infinite number of possible input combinations, and the hash is fixed-length, in theory two different sets of data could produce the same hash.  This is called a <em>collision</em>.  In practice, the hash is of sufficient size, and the algorithm to produce it sufficiently complex, that it is computationally infeasible to produce the same hash with two different sets of input. If it can be demonstrated that two different sets of input can produce the same fingerprint by a hashing algorithm, then that algorithm will be considered insecure and fall into disuse in favor of stronger hashing algorithms.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../grep11-display/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Displaying your GREP11 environment
              </div>
            </div>
          </a>
        
        
          <a href="../exercise-overview/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                An overview of the Exercises
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm-wsc" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://hub.docker.com/u/s390x" target="_blank" rel="noopener" title="hub.docker.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>